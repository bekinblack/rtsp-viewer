# Графическое приложение для подключения к IP-камере и вывода двух RTSP-потоков

# Цель
Реализовать десктопное приложение, позволяющее подключаться к IP-камере по заданным параметрам
и одновременно получать два RTSP-потока (высокое и низкое качество)
с валидацией входных данных и недопущением одновременной загрузки идентичных потоков.

# Технологии
- Язык: Golang
- Фреймворки/библиотеки: любые (на ваше усмотрение)
- Платформа: Windows (кроссплатформенность приветствуется, но не обязательна)

# Функциональные требования
- Форма подключения:
    - Поля ввода: 'IP', 'Port', 'Login', 'Password'
    - Поля ввода RTSP: 'RTSP URI #1 (High)', 'RTSP URI #2 (Low)'
    - Кнопки: 'Проверить', 'Подключиться', 'Отключиться'
    - Переключатель 'Показать пароль'

- Валидация:
    - 'IP': корректный IPv4
    - 'Port': целое 1–65535
    - 'Login'/'Password': непустые значения
    - 'RTSP URI': схема 'rtsp://', корректный URL, допускаются плейсхолдеры вида '{login}', '{password}', '{ip}', '{port}' для автоподстановки
    - Проверка уникальности потоков: если оба 'RTSP URI' указывают на один и тот же поток - уведомить пользователя и запретить подключение к обоим одновременно
        - Минимально: строковое сравнение после нормализации (обрезка пробелов, регистр, trailing slash)
        - Опционально (бонус): детект совпадения потоков при воспроизведении (сравнение SSRC/SDP/параметров SPS/PPS, разрешения/битрейта, PID/track id)

- Подключение и воспроизведение:
    - Асинхронное подключение по обеим ссылкам
    - Отображение двух независимых превью: 'High' и 'Low'
    - Отображение статуса каждого потока (Подключение / Воспроизведение / Ошибка / Отключено)
    - Корректная обработка ошибок: неверные учетные данные, таймауты, недоступный хост, 401/403, разрыв соединения
    - Возможность остановки потоков ('Отключиться')

- Пользовательские уведомления:
    - Четкие сообщения об ошибке валидации
    - Предупреждение, если потоки совпадают, с инструкцией, что исправить
    - Не логировать 'Password'; в логах допускается маскировка


# Нефункциональные требования
- UX: отзывчивый UI, отсутствие блокировки интерфейса во время сетевых операций
- Производительность: разумное использование ресурсов при одновременном проигрывании двух потоков
- Стабильность: автоматическое восстановление при кратковременных обрывах (бонус)
- Код: читаемость, разбиение на слои (UI / сервис воспроизведения / валидация / конфигурация), обработка ошибок без немых catch
- Безопасность: не хранить пароль в открытом виде на диск; опционально - шифрование настроек


# Рекомендации по стеку
- Golang:
    - UI: 'fyne', 'wails', 'gioui.org'
    - Медиа: 'pion/rtsp', 'gstreamer' bindings, интеграция с 'ffmpeg'/'vlc' (через сабпроцесс и оверлей/виджет)


# Валидация и логика подстановки
- Допускается использовать шаблоны в 'RTSP URI':
    - Пример: 'rtsp://{login}:{password}@{ip}:{port}/Streaming/Channels/101'
    - При нажатии 'Проверить' приложение выполняет подстановку и показывает итоговые URI (без раскрытия пароля в UI - маскировка '')

- Нормализация URI перед сравнением:
    - Обрезка пробелов, приведение схемы/хоста к одному регистру, удаление лишних '/'
    - Опционально: сортировка query-параметров

- Если после нормализации 'RTSP URI #1 == RTSP URI #2':
    - Показать сообщение: «Оба RTSP-URI указывают на один и тот же поток. Измените один из URI, чтобы избежать двойной загрузки.»
    - Блокировать 'Подключиться' до исправления


# UI-макет
- Верхняя панель: поля 'IP', 'Port', 'Login', 'Password' (+ чекбокс 'Показать пароль')
- Средняя панель: 'RTSP URI #1 (High)', 'RTSP URI #2 (Low)' + кнопка 'Проверить'
- Нижняя панель: два видеоконтейнера: слева 'High', справа 'Low'; под каждым - индикатор статуса
- Кнопки справа: 'Подключиться', 'Отключиться'
- Окно слева: Подсказки, логи и сообщения валидации

```
+---------------------------------------------------------------------------------------------------+
|                                   IP Camera Viewer (пример)                                       |
+---------------------------------------------------------------------------------------------------+
| IP: [...............]   Port: [.....]   Login: [........]   Password: [********]  [ ] Показать    |
+---------------------------------------------------------------------------------------------------+
| RTSP URI 1 (High): [rtsp://{login}:{password}@{ip}:{port}/Streaming/Channels/101]  [ Проверить ]  |
| RTSP URI 2 (Low) : [rtsp://{login}:{password}@{ip}:{port}/Streaming/Channels/102]                 |
+---------------------------------------------------------------------------------------------------+
|  Preview High                                   |  Preview Low                                    |
|  +-------------------------------------------+  |  +-------------------------------------------+  |
|  |                Video Area                 |  |  |                Video Area                 |  |
|  |                                           |  |  |                                           |  |
|  |                                           |  |  |                                           |  |
|  |                                           |  |  |                                           |  |
|  |                                           |  |  |                                           |  |
|  |                                           |  |  |                                           |  |
|  +-------------------------------------------+  |  +-------------------------------------------+  |
|  Статус: ... (OK/ERR)                           |   Статус: ... (OK/ERR)                          |
+---------------------------------------------------------------------------------------------------+
| Подсказки/сообщения валидации:                                            |  +-----------------+  |
| - Некорректный IP / порт / логин / пароль / RTSP-схема                    |  | [Подключиться]  |  |
| - Внимание: оба RTSP-URI совпадают после нормализации                     |  | [Отключиться]   |  |
| - Логи                                                                    |  +-----------------+  |
+---------------------------------------------------------------------------------------------------+
```

# Ошибки и сообщения
- Валидация:
    - «Некорректный IPv4-адрес»
    - «Порт должен быть числом 1–65535»
    - «Логин/пароль не должны быть пустыми»
    - «RTSP-URI должен начинаться с rtsp://»
    - «Оба RTSP-URI совпадают после нормализации»
- Подключение:
    - «Ошибка авторизации (401/403)»
    - «Таймаут подключения»
    - «Хост недоступен / сетевой сбой»
    - «Не удалось декодировать поток» (с рекомендацией по установке кодеков/библиотек)


# Тестовые данные и проверка без реальной камеры
- Можно использовать публичные RTSP тест-потоки или локальный сервер:
    - Пример шаблонов: 'rtsp://{login}:{password}@{ip}:{port}/Streaming/Channels/101' и 'rtsp://{login}:{password}@{ip}:{port}/Streaming/Channels/102'
    - Локально: использовать 'rtsp-simple-server' или 'ffmpeg' для публикации двух разных профилей (бонус)


# Критерии приемки (Definition of Done)
- Валидация всех полей работает до попытки подключения
- Предотвращается одновременная загрузка идентичных потоков (минимум по нормализованной строке)
- Два видео-превью воспроизводятся параллельно; статусы отображаются корректно
- Ошибки сети/авторизации/декодирования отображаются человеку понятными сообщениями
- UI не блокируется во время подключения/воспроизведения
- В репозитории есть 'README' с инструкциями по сборке/запуску и перечислением зависимостей
- Пароль не попадает в логи и не сохраняется в открытом виде


# Что предоставить
- Ссылка на репозиторий с исходным кодом
- 'README' (необязательно):
    - Требования к окружению
    - Команды сборки/запуска
    - Как подставлять учетные данные и проверять работу без камеры
    - Известные ограничения
- Скриншоты работающего приложения (и/или короткое видео, 30–60 сек)
- Краткое описание архитектуры (1–2 абзаца, компоненты и их ответственность)
- При использовании нативных библиотек: инструкции по установке/распаковке DLL/SO


# Критерии оценки
- Оценивание:
    - Функциональность: соответствие требованиям (40%)
    - Качество кода и архитектуры: читаемость, разделение ответственности (30%)
    - UX и стабильность: отзывчивость, обработка ошибок (20%)
    - Документация (необязательно): полнота 'README' и простота запуска (5%)
    - Бонусы (необязательно): детект одинаковых потоков по характеристикам, автореконнект (5%)


# Бонус-задачи (необязательно)
- Автоматическое определение, что 'High' и 'Low' фактически один и тот же поток (по SDP/SSRC/профилю/разрешению/битрейту)
- Автопереподключение при обрывах с экспоненциальной паузой
- Сохранение последней рабочей конфигурации (без пароля) и «Быстрый старт»
- Отображение базовой телеметрии: FPS, разрешение, битрейт


# Подсказки по реализации
- Выполняйте сетевые операции в отдельных потоках/тасках; используйте токены отмены
- Централизуйте валидацию (отдельный модуль/сервис)
- Логи храните в памяти/файле с ротацией; пароли маскируйте
- Для 'FFmpeg/LibVLC' проверьте наличие бинарных зависимостей и корректные пути загрузки
